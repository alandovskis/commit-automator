#!/usr/bin/env bash
set -euo pipefail
ROOT="$( cd $( dirname "${BASH_SOURCE[0]}" ) && pwd )"

usage()
{
        USAGE="Usage: commit-automator install\n install repo"
        echo "${USAGE}"
        exit 22
}

if [ "$#" -lt 1 ]; then
        usage
fi

ACTION=${1}
shift

case $ACTION in
     install)
        if [ "$#" -lt 1 ]; then
                usage
        fi

        DIR=${1}
        shift
        HOOKS="${DIR}/.git/hooks"
        mkdir -p "${HOOKS}"
        cp "${ROOT}/hooks/prepare-commit-msg" "${HOOKS}/."
        ;;
     *)
        usage
        ;;
esac
